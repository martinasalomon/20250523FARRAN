
% refsection=chapter,%para obtener las referencias por capítulo
\usepackage[style=philosophy-classic,
sortcites=true,
annotation=true,
backend=biber,
labeldateparts=true,
backref=true,
useprefix=true,
citereset=chapter,
indexing=true,
relatedformat=brackets,
publocformat=loccolonpub,
volnumformat=strings,
latinemph=true,
inbeforejournal=true,
shorthandintro=true,
texencoding=utf8,
bibencoding=utf8,
sorting=nyvt,
uniquelist=minyear]{biblatex}

%GENERAR LOS INDICES, DESACTIVAMOS LAS OPCIONES PARA TITULOS
\renewbibmacro*{bibindex}{%
	\ifbibindex
	{\indexnames{author}%
		\indexnames{editor}%
		\indexnames{translator}%
		\indexnames{commentator}}
	{}}

\renewbibmacro*{citeindex}{%
	\ifciteindex
	{\indexnames{author}%
		\indexnames{editor}%
		\indexnames{translator}%
		\indexnames{commentator}}
	{}}

% instrucción que me permite crear titulo y año como cita
\DeclareCiteCommand{\titleyear}%
  {\usebibmacro{prenote}}%
  {\usebibmacro{cite:label}~(\printfield{year})}%
  {\multicitedelim}%
  {\usebibmacro{postnote}}
  
  
% CAMBIAMOS URL PARA QUE APAREZCA LA LEYENDA EN LINEA
\makeatletter
\newrobustcmd{\mkbiblege}[1]{%
	\begingroup
	\blx@blxinit
	\blx@setsfcodes
	<#1>
	\endgroup}
\makeatother

\DeclareFieldFormat{url}{\bibstring{url}\space\mkbiblege{\url{#1}}}

% REDEFINIR EL FORMATO DE CITADO EN PÁGINA 00
\renewbibmacro*{pageref}{%
	\iflistundef{pageref}
	{}
	{\printtext[pagerefformat]{%
			\ifnumgreater{\value{pageref}}{1}
			{\bibstring{backrefpages}\ppspace}
			{\bibstring{backrefpage}\ppspace}%
			\printlist[pageref][-\value{listtotal}]{pageref}}}}

% DECLARO UNA ALIAS PARA TRATAR MOVIE COMO MISC
\DeclareBibliographyAlias{movie}{misc}

% PONE PUNTO Y COMA ENTRE NOMBRE DE VARIOS AUTORES
\renewcommand*{\multinamedelim}{\addsemicolon\space}

% CAMBIA LA TIPOGRAFIA DE LA BIBLIOGRAFIA
\setlength{\bibhang}{3\parindent}%modifico el valor por default (4) de indentacion del año

\defcounter{biburlnumpenalty}{3000}
\defcounter{biburlucpenalty}{6000}
\defcounter{biburllcpenalty}{9000}

%% REDISEÑO PARA OBTENER MODO LARGO EN ALGUNAS ENTRADAS
\NewBibliographyString{organizator}
\NewBibliographyString{organizators}
\NewBibliographyString{byorganizator}
\NewBibliographyString{cordinator}
\NewBibliographyString{cordinators}
\NewBibliographyString{bycordinator}
\NewBibliographyString{direction}
\NewBibliographyString{directions}
\NewBibliographyString{bydirection}
\NewBibliographyString{maestriathesis}
\NewBibliographyString{ingenieriathesis}
\NewBibliographyString{gradothesis}
\NewBibliographyString{licenciaturathesis}
\NewBibliographyString{origpubbare}
\NewBibliographyString{especialthesis}
\NewBibliographyString{documentjob}
\NewBibliographyString{posgradothesis}
\NewBibliographyString{magisterthesis}
\NewBibliographyString{dirigida}% MODIFICACIONES PARA FILMES
\NewBibliographyString{dirigidas}
\NewBibliographyString{bydirigida}
\NewBibliographyString{escrita}
\NewBibliographyString{escritas}
\NewBibliographyString{byescrita}
\NewBibliographyString{elenco}
\NewBibliographyString{elencos}
\NewBibliographyString{byelenco}
\NewBibliographyString{tifthesis}
\NewBibliographyString{mimeograph}
\NewBibliographyString{photocopy}
\NewBibliographyString{digitalprinting}
\NewBibliographyString{edauthor}

\DefineBibliographyStrings{spanish}{%
	inpreparation    = {en preparación},
	submitted        = {enviado},
	forthcoming      = {de próxima aparición},
	inpress          = {en imprenta},
	prepublished     = {previamente publicado},
	digitalprinting  = {impresión digital},
	photocopy        = {fotocopia},
	mimeograph       = {mimeo},
	edauthor         = {edición de autor},
	dirigida         = {dirección},
	dirigidas        = {dirección},
	bydirigida       = {dirección de},
	escrita          = {escrita},
	escritas         = {escrita},
	byescrita        = {escrita por},
	elenco           = {actúan:},
	elencos          = {actúan:},
	byelenco         = {actúan:},
	part             = {tomo},
	january          = {enero},
	february         = {febrero},
	march            = {marzo},
	april            = {abril},
	may              = {mayo},
	june             = {junio},
	july             = {julio},
	august           = {agosto},
	september        = {septiembre},
	october          = {octubre},
	november         = {noviembre},
	december         = {diciembre},
	see              = {véase},
	seealso          = {véase también},
	backrefpage      = {re\-fe\-ren\-cia ci\-ta\-da en pági\-na},
	backrefpages     = {re\-fe\-ren\-cia ci\-ta\-da en pági\-nas},
	seenote          = {véase nota},
	quotedin         = {citado en},
	idem             = {ídem},
	idemsf           = {ídem},
	idemsm           = {ídem},
	idemsn           = {ídem},
	idempf           = {ídem},
	idempm           = {ídem},
	idempn           = {ídem},
	idempp           = {ídem},
	ibidem           = {\emph{ibidem}},
	prepublished     = {previamente publicado},
	nodate           = {sin fecha},
	withcommentator  = {con comentario de},
	withannotator    = {con notas de},
	withintroduction = {con introdución de},
	withforeword     = {con prólogo de},
	withafterword    = {con epílogo de},
	bycollaborator   = {con colaboración de},
	andothers        = {\emph{et al\adddot}},
	organizator      = {org\adddot},
	organizators     = {orgs\adddot},
	byorganizator    = {org\adddot\addspace por},
	cordinator       = {coord\adddot},
	cordinators      = {coords\adddot},
	bycordinator     = {coord\adddot\addspace por},
	direction        = {dir\adddot},
	directions       = {dirs\adddot},
	bydirection      = {dir\adddot\addspace por},
	mathesis         = {Tesis de Maestría},
	ingenieriathesis = {Tesis de Ingeniería},
	magisterthesis   = {Tesis de Magíster},
	phdthesis        = {Tesis de Doctorado},
	gradothesis      = {Tesis de Grado},
	licenciaturathesis = {Tesis de Licenciatura},
	tifthesis        = {Trabajo Integrador Final},
	posgradothesis   = {Tesis de Posgrado},
	especialthesis   = {Tesis de Especialización},
	documentjob      = {documento de trabajo},
	urlseen          = {visitado el\addspace},
	translationof    = {trad\adddot\addspace de},
	translationas    = {original publicado en},
	url              = {recuperado de},
	origpubbare      = {orig\adddotspace pub\adddotspace},
	newseries        = {nueva época},
	oldseries        = {antigua época},
	byeditorfo       = {ed\adddotspace y pról\adddotspace por},
	byeditorco       = {ed\adddotspace y com\adddotspace por},
	bytranslatorfo   = {traducido \lbx@lfromlang\ y prologado por},
	pagetotal        = {págs},
	pagetotals       = {págs},
	techreport       = {informe técnico},
	resreport        = {reporte de investigación},
	file             = {archivo},
	patent           = {patente},
	patentde         = {patente alemana},
	patenteu         = {patente europea},
	patentfr         = {patente francesa},
	patentuk         = {patente británica},
	patentus         = {patente estadounidense},
	patreq           = {solicitud de patente},
	patreqde         = {solicitud de patente alemana},
	patreqeu         = {solicitud de patente europea},
	patreqfr         = {solicitud de patente francesa},
	patrequk         = {solicitud de patente británica},
	patrequs         = {solicitud de patente estadounidense},
	bycompiler       = {comp\adddotspace por},
	issue            = {n\sptext{o}},
	number           = {n\sptext{o}},
	volume           = {vol\adddot},
	volumes          = {vols\adddot},
}

% corrección para año original
\makeatletter
\renewbibmacro*{transorigstring}{%
	\iffieldundef{reprinttitle}%
	{\printtext{\ifdefstring{\bbx@origfields}{origed}
			{\bibstring{origpubbare}}%
			{\bibstring{translationas}}}\nopunct}%
	{\printtext{\bibstring{reprint}}}\nopunct}
\makeatother
